<article class="widget">
  <h3>{{ widget.title }}</h3>

  <ng-container *ngIf="vm$ | async as vm">
    <section class="settings-block">
      <h4>Account Information</h4>
      <label class="settings-field">
        <span>Name</span>
        <div class="settings-input-status-row">
          <input
            type="text"
            [ngModel]="vm.displayName"
            (ngModelChange)="onProfileFieldChanged('displayName', $event)"
            (blur)="saveProfileIfNeeded()"
            placeholder="Enter your name"
          />
          <em class="settings-saved-indicator" *ngIf="vm.profileSaved">Saved</em>
        </div>
      </label>
      <label class="settings-field">
        <span>Username</span>
        <div class="settings-input-status-row">
          <input
            type="text"
            [ngModel]="vm.username"
            (ngModelChange)="onProfileFieldChanged('username', $event)"
            (blur)="saveProfileIfNeeded()"
            placeholder="Enter your username"
          />
          <em class="settings-saved-indicator" *ngIf="vm.profileSaved">Saved</em>
        </div>
      </label>
      <label class="settings-field">
        <span>Email</span>
        <div class="settings-input-status-row">
          <input
            type="email"
            [ngModel]="vm.email"
            (ngModelChange)="onProfileFieldChanged('email', $event)"
            (blur)="saveProfileIfNeeded()"
            placeholder="Enter your email"
          />
          <em class="settings-saved-indicator" *ngIf="vm.profileSaved">Saved</em>
        </div>
      </label>
      <label class="settings-field">
        <span>Password</span>
        <input type="password" placeholder="Enter your password" />
      </label>
      <div class="settings-actions">
        <button type="button">Sign Out</button>
        <button type="button">Delete Account</button>
      </div>
    </section>

    <section class="settings-block">
      <h4>Main Board</h4>
      <label class="settings-field">
        <span class="settings-label-inline">Main board for /{{ vm.username }}</span>
        <div class="settings-input-status-row">
          <select [ngModel]="vm.mainBoardId" (ngModelChange)="onMainBoardChanged($event)">
            <option value="" selected disabled>Select a board</option>
            <option *ngFor="let board of vm.boards" [value]="board.id">
              {{ board.boardName }} (/{{ board.boardUrl }})
            </option>
          </select>
          <em class="settings-saved-indicator" *ngIf="vm.saved">Saved</em>
        </div>
      </label>
      <p class="settings-status settings-status--error" *ngIf="vm.errorMessage">{{ vm.errorMessage }}</p>
    </section>
  </ng-container>
</article>
